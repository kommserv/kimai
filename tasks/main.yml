---
- name: Check that all the variables needed are defined
  assert:
    that:
      - kimai_user is defined
      - kimai_version is defined
  tags:
    - kimai

- name: Check what the latest version of Kimai is
  include_tasks: version_check.yml
  tags:
    - kimai

- name: Kimai git repo present
  git:
    repo: https://github.com/kevinpapst/kimai2.git
    dest: "{{ kimai_docroot }}"
    version: "{{ kimai_version }}"
    verify_commit: true
  become_user: "{{ kimai_user }}"
  tags:
    - kimai
...
